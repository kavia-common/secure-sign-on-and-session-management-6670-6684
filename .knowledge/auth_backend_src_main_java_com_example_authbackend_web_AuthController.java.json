{"is_source_file": true, "format": "Java", "description": "This Java source file `AuthController.java` defines a REST controller for handling authentication-related endpoints in the application. It provides endpoints for OAuth2 login initiation, callback processing, session validation, health checks, and dev login, managing JWT tokens and OAuth flows.", "external_files": ["com.example.authbackend.config.OAuthProperties", "com.example.authbackend.oauth.OAuthService", "com.example.authbackend.security.JwtService", "io.jsonwebtoken.Claims", "io.swagger.v3.oas.annotations.Operation", "io.swagger.v3.oas.annotations.tags.Tag", "jakarta.servlet.http.HttpServletRequest", "org.springframework.http.HttpHeaders", "org.springframework.http.ResponseEntity", "org.springframework.security.core.Authentication", "org.springframework.util.MultiValueMap", "org.springframework.web.bind.annotation.*", "java.net.URI", "java.time.Instant", "java.util.HashMap", "java.util.Map"], "external_methods": ["oauthService.buildLoginRedirect", "oauthService.handleCallback", "jwtService.tryParseClaims", "jwtService.generate"], "published": ["AuthController"], "classes": [{"name": "AuthController", "description": "REST controller managing OAuth2 login flows, session validation, and logout for the authentication system."}], "methods": [{"name": "login", "description": "Initiates OAuth2 login by redirecting to the provider's authorization URL based on the provider name and optional state."}, {"name": "callback", "description": "Handles the OAuth2 callback, exchanges code for tokens, upserts user info, and returns a JWT."}, {"name": "logout", "description": "Instructs the client to discard the JWT, effectively logging out."}, {"name": "session", "description": "Validates the Bearer token in the request header and returns session information extracted from JWT claims."}, {"name": "health", "description": "Provides health and configuration status, indicating whether OAuth provider configurations are complete."}, {"name": "devLogin", "description": "Allows development-only email login to generate a JWT for testing when enabled."}], "calls": ["oauthService.buildLoginRedirect", "oauthService.handleCallback", "jwtService.tryParseClaims", "jwtService.generate"], "search-terms": ["AuthController", "OAuth2 login", "JWT session", "OAuth callback", "health check", "dev login"], "state": 2, "file_id": 17, "knowledge_revision": 38, "git_revision": "", "hash": "fed9ed7e88e36af35ab64477145a42b7", "format-version": 4, "code-base-name": "auth_backend", "filename": "auth_backend/src/main/java/com/example/authbackend/web/AuthController.java", "revision_history": [{"38": ""}]}